@using Microsoft.AspNetCore.Mvc.TagHelpers
@using Neptune.WebMvc.Common
@using Neptune.WebMvc.Common.HtmlHelperExtensions
@using Neptune.WebMvc.Common.ModalDialog
@using Neptune.WebMvc.Views.Shared
@inherits Neptune.WebMvc.Views.DelineationUpload.DownloadDelineationGeometry
@model Neptune.WebMvc.Views.DelineationUpload.DownloadDelineationGeometryViewModel
@section JavascriptAndStylesContent
{
    @{ MapJavascriptIncludes.RenderPartialView(Html); }
}
@Html.ValidationSummary()
<div class="formPage">
    <div class="row">
        <div class="col-md-6">
            <p>
                Use this form on the right to bulk upload Treatment BMP Delineations. Requirements:
            </p>
            <ul>
                <li>A single ArcGIS file geodatabase containing only delineation features</li>
                <li>The file geodatabase (.gdb) must be contained within a compressed zip file (.zip)</li>
                <li>The zip file must contain only one file geodatabase and no other data</li>
                <li>The file geodatabase must contain only one feature class</li>
                <li>The feature class must have an attribute for Treatment BMP name and all values must match a Treatment BMP name already in the Inventory Module</li>
                <li>You must supply the name of the attribute representing the Treatment BMP name</li>
                <li>
                    Geodatabases using ESRI Smart Database Compression (SDC) are not supported. Please
                    <a href="http://desktop.arcgis.com/en/arcmap/10.3/tools/data-management-toolbox/uncompress-file-geodatabase-data.htm">uncompress</a>
                    before zipping and uploading
                </li>
                <li>Version 10.1+ file geodatabases are supported</li>
            </ul>
        </div>
        <div class="col-md-6">
            <form id="uploadGisForm" method="post" action="@ViewDataTyped.NewGisUploadUrl" enctype="multipart/form-data">
                <div class="form-horizontal">
                    <div class="row form-group" style="margin-top: 0px;">
                        <div class="col-md-6">
                            @Html.LabelWithSugarFor(x => x.StormwaterJurisdictionID)
                        </div>
                        <div class="col-md-6">
                            @Html.DropDownListFor(x => x.StormwaterJurisdictionID, ViewDataTyped.StormwaterJurisdictions, new Dictionary<string, object> {{"class", "form-control"}})
                        </div>
                    </div>
                </div>
                <button type="submit" class="btn btn-neptune" style="display: inline-block;">
                    <span class="glyphicon glyphicon-triangle-right" style="margin-left: 10px;"></span>
                </button>
            </form>
            
        </div>
    </div>

    <hr/>

    <div class="row">
        <div class="col-md-12">
            <p id="approvalInstructionsText">
                After you upload your file, you will see a report of the number of Treatment BMPs in the system which will have their delineations Downloadd. Once you confirm the upload, new delineations will be added and any existing delineation locations with the same Treatment BMP name and specified Jurisdiction will be overwritten. All uploaded delineations will be marked as provisional.
            </p>
            <form id="approveGisUploadForm" method="post" action="@ViewDataTyped.ApprovedGisUploadUrl">
                <div id="gisUploadResults"></div>
            </form>
        </div>
    </div>
</div>

