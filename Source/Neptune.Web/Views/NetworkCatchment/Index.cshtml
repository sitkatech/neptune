@using LtInfo.Common
@using Neptune.Web.Views.Shared
@using Newtonsoft.Json
@using Newtonsoft.Json.Linq
@inherits Neptune.Web.Views.NetworkCatchment.Index

@section JavascriptAndStylesContent
{
    @{MapJavascriptIncludes.RenderPartialView(Html);}
    <script src="@Url.Content("~/ScriptsCustom/Maps/NeptuneMaps.GeoServerMap.min.js")" type="text/javascript"></script>
    <script type="text/javascript">
        var networkCatchmentMap;
        jQuery(function() {
            var mapInitJson = @Html.Raw(JObject.FromObject(ViewDataTyped.MapInitJson).ToString(Formatting.None));
            var geoserverUrl = @Html.Raw(ViewDataTyped.GeoServerUrl.ToJS());
            var networkCatchmentLayerName = @Html.Raw(ViewDataTyped.NetworkCatchmentLayerName.ToJS());

            networkCatchmentMap = new NeptuneMaps.GeoServerMap(mapInitJson, "Terrain", geoserverUrl);

            networkCatchmentMap.wmsParams = networkCatchmentMap.createWmsParamsWithLayerName(networkCatchmentLayerName);
            networkCatchmentMap.wfsParams = networkCatchmentMap.createWfsParamsWithLayerName(networkCatchmentLayerName);

            networkCatchmentMap.addWmsLayer(networkCatchmentLayerName, "Network Catchments");
            //this.map.on('click', this.selectParcel, this);
        });
    </script>
}

<div class="row">
    <div class="col-sm-12">
        <div class="neptuneMap" id="@ViewDataTyped.MapInitJson.MapDivID"></div>
    </div>
</div>