"use strict";L.Control.TemplatedControl=L.Control.extend({templateID:null,initializeControlInstance:function(){},getTrackedElement:function(n){return this.parentElement.querySelector("#"+n)},onAdd:function(n){var t=document.querySelector("#"+this.templateID);return this.parentElement=document.importNode(t.content,!0).firstElementChild,this.initializeControlInstance(n),this.parentElement},onRemove:function(){jQuery(this.parentElement).remove()}});L.Control.Watermark=L.Control.extend({onAdd:function(){var n=L.DomUtil.create("img");return n.src="/Content/img/OCStormwater/banner_logo.png",n.style.width="200px",n},onRemove:function(){jQuery(this.parentElement).remove()}});L.control.watermark=function(n){return new L.Control.Watermark(n)};var stopClickPropagation=function(n){L.DomEvent.on(n,"click",function(n){n.stopPropagation()})};L.Control.DelineationMapSelectedAsset=L.Control.TemplatedControl.extend({templateID:"selectedAssetControlTemplate",initializeControlInstance:function(){stopClickPropagation(this.parentElement);this._noAssetSelected=this.parentElement.querySelector("#noAssetSelected");this._selectedBmpInfo=this.parentElement.querySelector("#selectedBmpInfo");this._selectedBmpName=this.parentElement.querySelector("#selectedBmpName");this._delineationStatus=this.parentElement.querySelector("#delineationStatus");this._delineationButton=this.parentElement.querySelector("#delineationButton");this._selectedCatchmentInfo=this.parentElement.querySelector("#selectedCatchmentInfo");this._selectedCatchmentDetails=this.parentElement.querySelector("#selectedCatchmentDetails");this._traverseCatchmentsButton=this.parentElement.querySelector("#traverseCatchmentsButton");this._upstreamCatchmentReportContainer=this.parentElement.querySelector("#upstreamCatchmentReportContainer");this._upstreamCatchmentReport=this.parentElement.querySelector("#upstreamCatchmentReport")},treatmentBMP:function(n){this._beginDelineationHandler&&(L.DomEvent.off(this._delineationButton,"click",this._beginDelineationHandler),this._beginDelineationHandler=null);this._beginDelineationHandler=function(t){window.delineationMap.addBeginDelineationControl(n);this.disableDelineationButton();t.stopPropagation()}.bind(this);L.DomEvent.on(this._delineationButton,"click",this._beginDelineationHandler);this._selectedBmpName.innerHTML="BMP: "+n.properties.Name;n.properties.DelineationURL?(this._delineationStatus.innerHTML="This BMP's current recorded delineation is displayed in yellow on the map.",this._delineationButton.innerHTML="Redelineate Drainage Area"):(this._delineationStatus.innerHTML="No catchment delineation has been performed for this BMP",this._delineationButton.innerHTML="Delineate Drainage Area");this._selectedBmpInfo.classList.remove("hiddenControlElement");this._noAssetSelected.classList.add("hiddenControlElement");this._selectedCatchmentInfo.classList.add("hiddenControlElement")},regionalSubbasin:function(n){this._traverseCatchmentsHandler&&(L.DomEvent.off(this._traverseCatchmentsButton,"click",this._traverseCatchmentsHandler),this._traverseCatchmentsHandler=null);this._traverseCatchmentsHandler=function(){window.delineationMap.retrieveAndShowUpstreamCatchments(n)};L.DomEvent.on(this._traverseCatchmentsButton,"click",this._traverseCatchmentsHandler);this._selectedCatchmentDetails.innerHTML="Selected Catchment ID: "+n.properties.RegionalSubbasinID;this._selectedCatchmentInfo.classList.remove("hiddenControlElement");this._selectedBmpInfo.classList.add("hiddenControlElement");this._noAssetSelected.classList.add("hiddenControlElement");this._upstreamCatchmentReportContainer.classList.add("hiddenControlElement")},reset:function(){this._selectedBmpInfo.classList.add("hiddenControlElement");this._selectedCatchmentInfo.classList.add("hiddenControlElement");this._noAssetSelected.classList.remove("hiddenControlElement")},reportUpstreamCatchments:function(n){this._upstreamCatchmentReportContainer.classList.remove("hiddenControlElement");this._upstreamCatchmentReport.innerHTML="Found "+n+" upstream catchment(s)"},disableDelineationButton:function(){this._delineationButton&&(this._delineationButton.disabled="disabled")},enableDelineationButton:function(){this._delineationButton&&this._delineationButton.removeAttribute("disabled")},disableUpstreamCatchmentsButton:function(){this._traverseCatchmentsButton&&(this._traverseCatchmentsButton.innerHTML="Loading...",this._traverseCatchmentsButton.disabled="disabled")},enableUpstreamCatchmentsButton:function(){this._traverseCatchmentsButton&&(this._traverseCatchmentsButton.innerHTML="Trace Upstream Catchments",this._traverseCatchmentsButton.removeAttribute("disabled"))}});L.control.delineationSelectedAsset=function(n){return new L.Control.DelineationMapSelectedAsset(n)};L.Control.BeginDelineation=L.Control.TemplatedControl.extend({templateID:"beginDelineationControlTemplate",initializeControlInstance:function(){stopClickPropagation(this.parentElement);var n=this.getTrackedElement("cancelDelineationButton"),t=this.treatmentBMPFeature.properties.HasDelineation?"Revise the Catchment Area":"Draw the Catchment Area";this.getTrackedElement("delineationOptionDrawText").innerHTML=t;L.DomEvent.on(n,"click",function(n){window.delineationMap.removeBeginDelineationControl();n.stopPropagation()})},initialize:function(n,t){this.treatmentBMPFeature=t;L.setOptions(this,n);console.log(this.treatmentBMPFeature.properties)}});L.control.beginDelineation=function(n,t){return new L.Control.BeginDelineation(n,t)};