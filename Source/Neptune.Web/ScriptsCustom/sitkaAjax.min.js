/*-----------------------------------------------------------------------
<copyright file="sitkaAjax.min.js" company="Tahoe Regional Planning Agency and Sitka Technology Group">
Copyright (c) Tahoe Regional Planning Agency and Sitka Technology Group. All rights reserved.
<author>Sitka Technology Group</author>
</copyright>

<license>
This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License <http://www.gnu.org/licenses/> for more details.

Source code is available upon request via <support@sitkatech.com>.
</license>
-----------------------------------------------------------------------*/
SitkaAjax={};SitkaAjax.ajax=function(n,t,i){typeof i!="function"&&(i=SitkaAjax.errorHandler);jQuery.ajax(n).success(function(n,i,r){SitkaAjax.handleLoginRedirect(n,i,r,t)}).fail(i)};SitkaAjax.handleLoginRedirect=function(n,t,i,r){var f=i.responseText,u;f.indexOf("SitkaIfInPartialPageRedirectToLoginPage")>=0?(u=window.location,window.location="/Account/LogOn?returnUrl="+u.pathname+u.search+u.hash):r(n,t,i)};SitkaAjax.get=function(n,t,i){SitkaAjax.ajax({type:"GET",url:n},t,i)};SitkaAjax.post=function(n,t,i,r){SitkaAjax.ajax({type:"POST",url:n,data:t},i,r)};SitkaAjax.getJSON=function(n,t,i){SitkaAjax.ajax({type:"GET",url:n,dataType:"json"},t,i)};SitkaAjax.postJSON=function(n,t,i,r){SitkaAjax.ajax({type:"POST",url:n,data:t,dataType:"json"},i,r)};SitkaAjax.load=function(n,t,i){SitkaAjax.get(t,function(t){n.html(t)},i)};SitkaAjax.errorHandler=function(n){var t="Please reload the page and try again. If the problem persists, please contact projectneptune@sitkatech.com";try{if(!Sitka.Methods.isUndefinedNullOrEmpty(n)&&!Sitka.Methods.isUndefinedNullOrEmpty(n.responseText))if(jQuery(n.responseText).find("#customErrorMessageDiv").length!=0){var i=jQuery(n.responseText).find("#customErrorMessageDiv").html(),r=i.replace("h1","div").replace("<\/div>","<\/div>\r\n").replace("<br/>","<br/>\r\n"),u="<div>"+r+"<\/div>",f=jQuery(u).text();t="An error has occurred: "+f+"\r\n"+t}else t="An unknown error error has occurred.\r\n"+t}catch(e){t="Could not parse error message properly.\r\n"+t+"\r\nException while parsing:\r\n"+e}window.alert(t)};
//# sourceMappingURL=sitkaAjax.min.js.map
