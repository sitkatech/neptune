NeptuneMaps.GeoServerMap=function(n,t,i,r){NeptuneMaps.Map.call(this,n,t,r);this.geoserverUrlOWS=i;this.wmsLayers={};this.wmsParams={service:"WMS",transparent:!0,version:"1.1.1",format:"image/png",info_format:"application/json",tiled:!0};this.wfsParams={service:"WFS",version:"2.0",request:"GetFeature",outputFormat:"application/json",SrsName:"EPSG:4326"}};NeptuneMaps.GeoServerMap.prototype=Sitka.Methods.clonePrototype(NeptuneMaps.Map.prototype);NeptuneMaps.GeoServerMap.prototype.createWmsParamsWithLayerName=function(n){var i={layers:n},t=jQuery.extend({},this.wmsParams);return L.Util.extend(t,i),t};NeptuneMaps.GeoServerMap.prototype.createWfsParamsWithLayerName=function(n){var i={typeName:n},t=jQuery.extend({},this.wfsParams);return L.Util.extend(t,i),t};NeptuneMaps.GeoServerMap.prototype.addWmsLayer=function(n,t,i,r){var f=this.createWmsParamsWithLayerName(n),u;return i&&L.Util.extend(f,i),u=L.tileLayer.wms(this.geoserverUrlOWS,f).addTo(this.map),this.addLayerToLayerControl(u,t,r),u};NeptuneMaps.GeoServerMap.prototype.selectFeatureByWfs=function(n,t){var i=L.Util.extend(this.createWfsParamsWithLayerName(n),t);return jQuery.ajax({url:this.geoserverUrlOWS+L.Util.getParamString(i),type:"GET"})};NeptuneMaps.GeoServerMap.prototype.getFeatureInfo=function(n,t){var i=t[0],r=t[1],u=i+.0001,f=r+.0001,e=[i,r,u,f].join(","),o={service:"WMS",transparent:!0,version:"1.1.1",request:"GetFeatureInfo",info_format:"application/json",tiled:!0,QUERY_LAYERS:n,layers:n,X:50,Y:50,SRS:"EPSG:4326",WIDTH:101,HEIGHT:101,BBOX:e};return jQuery.ajax({url:this.geoserverUrlOWS+L.Util.getParamString(o),type:"GET"})};