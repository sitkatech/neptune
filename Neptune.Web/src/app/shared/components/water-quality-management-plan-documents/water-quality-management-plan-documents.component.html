<div class="documents">
    <h3>Documents</h3>

    @if(waterQualityManagementPlan$ | async; as waterQualityManagementPlan) {
    <div class="page-body">
        @if (waterQualityManagementPlanDocuments$ | async; as waterQualityManagementPlanDocuments) { @for (waterQualityManagementPlanDocumentType of
        getWaterQualityManagementPlanDocumentTypes(); track $index) { @if (getDocumentsByType(waterQualityManagementPlanDocuments,
        waterQualityManagementPlanDocumentType.Value).length > 0) {
        <h4 class="document__sub-header">{{ waterQualityManagementPlanDocumentType.DisplayName }}</h4>
        @for (waterQualityManagementPlanDocument of getDocumentsByType(waterQualityManagementPlanDocuments, waterQualityManagementPlanDocumentType.Value); track $index) {
        <water-quality-management-plan-document
            [keyDocument]="waterQualityManagementPlanDocument"
            [waterQualityManagementPlan]="waterQualityManagementPlan"
            [isLoading]="isLoading"
            [disableExtract]="isExtracting"
            (download)="downloadFile($event)"
            (extractData)="onClickExtractData($event.waterQualityManagementPlanDocument)">
        </water-quality-management-plan-document>
        } } } }
    </div>
    }

    <!-- Inline Chatbot Panel -->
    @if (activeChatbotDocument) {
    <div class="extracted-data-panel" [loadingSpinner]="{ isLoading: isExtracting, loadingHeight: 100 }">
        <water-quality-management-plan-chatbot [waterQualityManagementPlanDocument]="activeChatbotDocument" [extractionResult]="extractionResult">
        </water-quality-management-plan-chatbot>
    </div>
    }
</div>
